
\section{Proof of Liu's Analysis}  

This section provides the proof to support the correctness of the test in Eq. \eqref{eq:TDA-suspension}. First, it should be easy to see that we can convert the suspension time of task $\tau_k$ into computation. This has been done by many researchers, e.g., the proof in Lemma 3 in the paper by Liu and Chen \cite{Liu_2014}. The remaining part is to show that the additional interference due to self-suspension from a higher-priority task $\tau_i$ is at most $min(C_i, S_i)$. The interference to be at most $C_i$ has been provided in the literature as well, e.g., \cite{Rajkumar_1990}\cite{Liu_2014}. However, the argument about blocking task $\tau_k$ due to a higher-priority task $\tau_i$ by at most $S_i$ amount of time is not very clear. 

We can prove the correctness of Eq. \eqref{eq:TDA-suspension} by using a similar proof of the critical instant theorem of the ordinary sporadic task system. From the above discussions, we can greedily convert the suspension time of task $\tau_k$ to its computation time. For notational brevity, let $C_k'$ be $C_k + S_k$. We call this converted version of task $\tau_k$ as task $\tau_k'$. 

We now classify the $k-1$ higher-priority tasks into two sets: ${\bf T}_1$ and ${\bf T}_2$. A task $\tau_i$ is in ${\bf T}_1$ if $C_i \geq S_i$; otherwise, it is in ${\bf T}_2$.
Consider the following schedule:
\begin{itemize}
\item Task $\tau_k'$ releases a job at time $t$.
\item A higher priority task $\tau_i$ in ${\bf T}_1$ releases a job at time $t$, in which the suspension time of this job is converted to computation time.
\item A higher priority task $\tau_i$ in ${\bf T}_2$ releases a job at time $t$, in which the execution time of this job is $2C_i$.
\item All the subsequent higher-priority jobs are released as early as possible by respecting to their periods. All these jobs are executed with their worst-case execution times and do not suspend themselves at all.
\end{itemize}

Let the response time of the job of task $\tau_k'$ released at time $t$ in the above schedule be $R_k'$. For brevity, the above schedule is called \emph{bursty interference schedule} for the rest of the report. The following lemma shows that $R_k'$ is a safe upper bound of the original self-suspending task system. 

\begin{lemma}
\label{lemma:critical}
 $R_k'$ defined in the above bursty interference schedule is a safe upper bound of the worst-case response time of task $\tau_k'$ in the self-suspending task system if its worst-case response time is no more than $T_k$.
\end{lemma}
\begin{proof}
According to the above definitions, we only need to show that $R_k'$ is a safe upper bound of the worst-case response time of task $\tau_k'$ by converting the suspension time of task $\tau_k$ as computation. We consider a given schedule in the task system with $\tau_1, \tau_2, \ldots, \tau_k', \tau_{k1+}, \ldots$. Since we consider fixed-priority preemptive scheduling, we can safely remove all the lower priority tasks without changing any execution pattern of the higher-priority tasks. Moreover, since we assume that the worst-case response time of task $\tau_k'$ is no more than $T_k$, there is no impact on the schedule of a job of task $\tau_k'$ if all the other jobs of task $\tau_k'$ are removed. 

Therefore, for the rest of the proof, we only have to analyze the response time of a job of task $\tau_k'$ released at time $t_k$, in which all the other jobs of task $\tau_k'$ and other lower priority jobs are removed. Suppose that the job has a response time $\rho_i$ in the above schedule. This means that the system is busy for executing the higher-priority tasks or the job of task $\tau_k'$ from $t_k$ to $t_k+\rho_i$. In the above schedule, let $t_{-1}$ be the latest moment before $t_k$ such that the processor does not run any job. That is, from $t_{-1}$ to $t_k$, certain higher-priority tasks are executed by the processor. Apparently, we can change the release time of the job of task $\tau_k'$ to $t_{-1}$. The response time of the job becomes $\rho+t_k-t_{-1} \geq \rho$. 


\end{proof}
  
  

  
  